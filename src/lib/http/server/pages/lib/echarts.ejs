<% const cdnJson5URL = "https://cdn.bootcdn.net/ajax/libs/json5/0.5.1" %>
<% const cdnEchartsURL = "https://cdn.bootcdn.net/ajax/libs/echarts/5.1.0" %>
<script src="<%- cdnJson5URL %>/json5.min.js"></script>
<script src="<%- cdnEchartsURL %>/echarts.min.js"></script>
<script>
__ONLOADS__.push(function() {
    const elements = document.querySelectorAll("code[class*='language-echarts']");
    for (let ele of elements) {
        const parent = ele.parentElement;
        parent.style.paddingLeft = "5%";
        parent.style.paddingRight = "5%";

        const text = ele.innerText;
        ele.innerHTML = "";
        const options = JSON5.parse(text);

        const g = document.createElement("div");
        g.style.width = `${parseInt(parent.clientWidth * 0.88)}px`;
        g.style.height = "300px";
        parent.appendChild(g);

        echarts.init(g).setOption(options);
    }
});
</script>